{"version":3,"sources":["views/alertes/alertes-receipt/alertes-receipt.js"],"names":["AlertesReceipt","props","useState","loaad","setLoad","alertes","setAlertes","loadAlerte","a","API_BASE_URL","get","then","res","data","console","log","catch","e","useEffect","setTimeout","length","className","scope","style","width","map","alerte","index","nomuser","charAt","prenomuser","moment","dateaccident","fromNow","graviteaccident","nombredengins","lataccident","longaccident","format","class","to","idaccident","src"],"mappings":"mOAiKeA,UArIQ,SAACC,GAGtB,MAAyBC,oBAAS,GAAlC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAA8BF,mBAAS,IAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KACA,EAA0BJ,oBAAS,GAAnC,mBAEMK,GAFN,UAEgB,uCAAG,sBAAAC,EAAA,sEACXC,IAAaC,IAAI,qBAAqBC,MAAM,SAAAC,GAChD,IAAIC,EAAOD,EAAIC,KAAKA,KACpBC,QAAQC,IAAI,oBAAqBF,GACjCP,EAAWO,MACVG,OAAO,SAAAC,GACRH,QAAQC,IAAIE,MANG,2CAAH,sDAgBhB,OAPAC,qBAAU,WACRC,YAAW,WACTf,GAAQ,KACP,MACHG,MACC,IAID,mCAIIJ,EAEE,mCAEIE,EAAQe,OAAS,EAGb,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,wBAAOC,UAAU,2BAAjB,UACE,gCACA,+BAEE,oBAAIC,MAAM,MAAMC,MAAO,CAAEC,MAAO,SAChC,oBAAIF,MAAM,QACV,oBAAIA,MAAM,QACV,oBAAIA,MAAM,aAIZ,gCACCjB,EAAQoB,KAAI,SAACC,EAAQC,GAAT,OACX,+BACE,6BACE,sBAAKN,UAAU,UAAf,UACE,qBAAKA,UAAU,uBAAf,SACE,sBAAKA,UAAU,uBAAf,UAMGK,EAAOE,QAAQC,OAAO,GAAG,GAAGH,EAAOI,WAAWD,OAAO,GACtD,sBAAMR,UAAU,oCAGpB,gCACE,wBAAOA,UAAU,aAAjB,UAA+BK,EAAOI,WAAtC,IAAmDJ,EAAOE,WAC1D,uBAAOP,UAAU,8BAAjB,SAAgDU,IAAO,GAAD,OAAIL,EAAOM,eAAgBC,eAEnF,sBAAKZ,UAAU,iCAAf,UACE,sBAAMA,UAAU,kCACf,GAFH,iBAEkBK,EAAOQ,gBAFzB,uBAE8DR,EAAOS,iBAErE,sBAAKd,UAAU,iCAAf,wBACcK,EAAOU,YADrB,iBACgDV,EAAOW,aADvD,IACqE,uBADrE,4BAEkB,uBAAMhB,UAAU,iBAAhB,cAAoCU,IAAO,GAAD,OAAIL,EAAOM,eAAgBM,OAAO,QAA5E,IAAsF,GACpGP,IAAO,GAAD,OAAIL,EAAOM,eAAgBM,OAAO,gBAD1B,IAC4C,GAD5C,IACiD,SAC/DP,IAAO,GAAD,OAAIL,EAAOM,eAAgBM,OAAO,YAF1B,eAOtB,uBACA,uBACA,+BACE,cAAC,IAAD,CAAMC,MAAM,uBACNC,GAAE,yBAAoBd,EAAOe,YADnC,0BAMA,cAAC,IAAD,CACEF,MAAM,+BACNC,GAAE,uBAAkBd,EAAOe,YAF7B,sCAxCKd,EAAM,iBAyD1B,cAAC,IAAD,UACC,cAAC,IAAD,CAAMN,UAAU,0EAAhB,SACA,gCACE,cAAC,IAAD,CACEqB,IAAK,sBACLrB,UAAU,cAEZ,oBAAIA,UAAU,6BAAd,oDAOT,cAAC,IAAD,CAAMA,UAAU,mEAAhB,SACC,oBAAIA,UAAU,6BAAd","file":"static/js/12.9872a5f0.chunk.js","sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport {\r\n  CBadge,\r\n  CButton,\r\n  CCard,\r\n  CCardBody, CCardFooter,\r\n  CCardHeader,\r\n  CCol,\r\n  CCollapse,\r\n  CDataTable, CForm, CFormGroup, CImg, CInput, CLabel,\r\n  CModal, CModalBody, CModalFooter,\r\n  CModalHeader, CModalTitle, CNavLink,\r\n  CRow, CSelect\r\n} from \"@coreui/react\";\r\n\r\n\r\nimport {\r\n  withScriptjs,\r\n  withGoogleMap,\r\n  GoogleMap,\r\n  Marker, InfoWindow,\r\n} from \"react-google-maps\";\r\nimport {Link, useParams} from \"react-router-dom\";\r\nimport {API_BASE_URL} from \"../../../models\";\r\nimport moment from \"moment\";\r\n\r\n\r\n\r\nconst AlertesReceipt = (props) => {\r\n\r\n\r\n  const [loaad, setLoad] = useState(false);\r\n  const [alertes, setAlertes] = useState([]);\r\n  const [modal, setModal] = useState(false);\r\n\r\n  const loadAlerte = async () => {\r\n    await API_BASE_URL.get(\"accidents/alertes\").then( res => {\r\n      let data = res.data.data;\r\n      console.log(\"Accidents alertes\", data);\r\n      setAlertes(data);\r\n    }).catch( e => {\r\n      console.log(e)\r\n    })\r\n  };\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      setLoad(true)\r\n    }, 1500)\r\n    loadAlerte();\r\n  }, []);\r\n\r\n  return (\r\n\r\n    <>\r\n      {/*Zones de la liste des agents*/}\r\n\r\n      {\r\n        loaad\r\n          ?\r\n          <>\r\n            {\r\n              alertes.length > 0\r\n                ?\r\n                (\r\n                  <CCard>\r\n                    <CRow>\r\n                      <CCol>\r\n                        <table className=\"table border shadow py-4\">\r\n                          <thead >\r\n                          <tr>\r\n\r\n                            <th scope=\"col\" style={{ width: '60%' }}></th>\r\n                            <th scope=\"col\"></th>\r\n                            <th scope=\"col\"></th>\r\n                            <th scope=\"col\"></th>\r\n\r\n                          </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                          {alertes.map((alerte, index) => (\r\n                            <tr key={index+1}>\r\n                              <td>\r\n                                <div className=\"message\">\r\n                                  <div className=\"pt-3 mr-3 float-left\">\r\n                                    <div className=\"c-avatar border-dark\">\r\n                                      {/*<CImg\r\n                                      src={'avatars/7.jpg'}\r\n                                      className=\"c-avatar-img\"\r\n                                      alt=\"admin@bootstrapmaster.com\"\r\n                                    />*/}\r\n                                      {alerte.nomuser.charAt(0)+''+alerte.prenomuser.charAt(0)}\r\n                                      <span className=\"c-avatar-status bg-success\"></span>\r\n                                    </div>\r\n                                  </div>\r\n                                  <div>\r\n                                    <small className=\"text-muted\">{alerte.prenomuser} {alerte.nomuser}</small>\r\n                                    <small className=\"text-muted float-right mt-1\">{moment(`${alerte.dateaccident}`).fromNow()}</small>\r\n                                  </div>\r\n                                  <div className=\"text-truncate font-weight-bold\">\r\n                                    <span className=\"fa fa-exclamation text-danger\"></span>\r\n                                    {\"\"} Gravité : {alerte.graviteaccident}, Nombre d'egnins : {alerte.nombredengins}\r\n                                  </div>\r\n                                  <div className=\"small text-muted text-truncate\">\r\n                                    Latidude : {alerte.lataccident}, Longitude : {alerte.longaccident} < br/>\r\n                                    a été envoyé le <span className=\"text-black-50 \"> { moment(`${alerte.dateaccident}`).format('dddd')} {\"\"}\r\n                                    { moment(`${alerte.dateaccident}`).format('Do MMMM YYYY')} {\"\"} {\" à \"}\r\n                                    { moment(`${alerte.dateaccident}`).format('HH:mm:ss')} </span>\r\n\r\n                                  </div>\r\n                                </div>\r\n                              </td>\r\n                              <td></td>\r\n                              <td></td>\r\n                              <td>\r\n                                <Link class=\"btn btn-primary mr-2\"\r\n                                      to={`/alertes/infos/${alerte.idaccident}`}\r\n                                >\r\n                                  Voir details\r\n                                </Link>\r\n\r\n                                <Link\r\n                                  class=\"btn btn-outline-warning mr-2\"\r\n                                  to={`/maps-agents/${alerte.idaccident}`}\r\n                                >\r\n                                  Trouver la position\r\n                                </Link>\r\n                              </td>\r\n                            </tr>\r\n\r\n                          ))}\r\n                          </tbody>\r\n                        </table>\r\n                      </CCol>\r\n                    </CRow>\r\n                  </CCard>\r\n                )\r\n                :\r\n                (<CRow>\r\n                  <CCol className=\"text-center d-flex justify-content-center align-items-center d-flex m-4\">\r\n                  <div>\r\n                    <CImg\r\n                      src={'avatars/datta-1.png'}\r\n                      className=\"img-fluid\"\r\n                    />\r\n                    <h4 className=\"text-uppercase text-center\">Données indisponibles  ...</h4>\r\n                  </div>\r\n                  </CCol>\r\n                </CRow> )\r\n            }\r\n          </>\r\n          :\r\n          (<CCol className=\"d-flex justify-content-center align-items-center text-center m-4\">\r\n            <h4 className=\"text-uppercase text-center\">Chargement en cours .....</h4>\r\n          </CCol>\r\n           )\r\n      }\r\n    </>\r\n  )\r\n}\r\n\r\n\r\nexport default AlertesReceipt\r\n"],"sourceRoot":""}